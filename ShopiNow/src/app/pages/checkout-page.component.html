<div class="checkout-container">
  <div class="checkout-header">
    <h1>Checkout</h1>
    <a routerLink="/cart" class="back-link">‚Üê Back to cart</a>
  </div>

  <div class="checkout-content">
    <div class="checkout-main">
      <div class="checkout-section">
        <h2>1. Shipping address</h2>
        <form class="shipping-form">
          <div class="form-row">
            <div class="form-group">
              <label for="fullName">Full name</label>
              <input
                type="text"
                id="fullName"
                [(ngModel)]="shippingAddress.fullName"
                name="fullName"
                class="form-control"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="address">Address</label>
              <input
                type="text"
                id="address"
                [(ngModel)]="shippingAddress.address"
                name="address"
                class="form-control"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="city">City</label>
              <input
                type="text"
                id="city"
                [(ngModel)]="shippingAddress.city"
                name="city"
                class="form-control"
                required
              />
            </div>
            <div class="form-group">
              <label for="state">State/Province</label>
              <input
                type="text"
                id="state"
                [(ngModel)]="shippingAddress.state"
                name="state"
                class="form-control"
                required
              />
            </div>
            <div class="form-group">
              <label for="zipCode">ZIP/Postal code</label>
              <input
                type="text"
                id="zipCode"
                [(ngModel)]="shippingAddress.zipCode"
                name="zipCode"
                class="form-control"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="phone">Phone number</label>
              <input
                type="tel"
                id="phone"
                [(ngModel)]="shippingAddress.phone"
                name="phone"
                class="form-control"
                required
              />
            </div>
          </div>
        </form>
      </div>

      <div class="checkout-section">
        <h2>2. Payment method</h2>
        <div class="payment-options">
          <label *ngFor="let method of paymentMethods" class="payment-option">
            <input
              type="radio"
              name="payment"
              [value]="method.value"
              [(ngModel)]="paymentMethod"
            />
            <span>{{ method.label }}</span>
          </label>
        </div>

        <div *ngIf="paymentMethod === 'card'" class="card-details">
          <div class="form-group">
            <label for="cardNumber">Card number</label>
            <input
              type="text"
              id="cardNumber"
              [(ngModel)]="cardDetails.cardNumber"
              name="cardNumber"
              class="form-control"
              placeholder="1234 5678 9012 3456"
              maxlength="19"
            />
          </div>
          <div class="form-group">
            <label for="nameOnCard">Name on card</label>
            <input
              type="text"
              id="nameOnCard"
              [(ngModel)]="cardDetails.nameOnCard"
              name="nameOnCard"
              class="form-control"
            />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="expiryDate">Expiry date</label>
              <input
                type="text"
                id="expiryDate"
                [(ngModel)]="cardDetails.expiryDate"
                name="expiryDate"
                class="form-control"
                placeholder="MM/YY"
                maxlength="5"
              />
            </div>
            <div class="form-group">
              <label for="cvv">CVV</label>
              <input
                type="text"
                id="cvv"
                [(ngModel)]="cardDetails.cvv"
                name="cvv"
                class="form-control"
                placeholder="123"
                maxlength="4"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="checkout-sidebar">
      <div class="order-summary">
        <h2>Order Summary</h2>

        <div class="order-items">
          <div *ngFor="let item of cartItems" class="order-item">
            <img [src]="item.product.image" [alt]="item.product.name" />
            <div class="item-info">
              <span class="item-name">{{ item.product.name }}</span>
              <span class="item-qty">Qty: {{ item.quantity }}</span>
            </div>
            <span class="item-price">{{ (item.product.price * item.quantity) | currency : 'USD' : 'symbol' : '1.0-0' }}</span>
          </div>
        </div>

        <div class="order-totals">
          <div class="total-row">
            <span>Subtotal:</span>
            <span>{{ subtotal | currency : 'USD' : 'symbol' : '1.0-0' }}</span>
          </div>
          <div class="total-row">
            <span>Shipping:</span>
            <span *ngIf="shipping === 0" class="free-shipping">FREE</span>
            <span *ngIf="shipping > 0">{{ shipping | currency : 'USD' : 'symbol' : '1.0-0' }}</span>
          </div>
          <div class="total-row">
            <span>Tax:</span>
            <span>{{ tax | currency : 'USD' : 'symbol' : '1.0-0' }}</span>
          </div>
          <div class="total-row final-total">
            <span>Order Total:</span>
            <strong>{{ total | currency : 'USD' : 'symbol' : '1.0-0' }}</strong>
          </div>
        </div>

        <button type="button" class="btn-place-order" (click)="placeOrder()">
          Place your order
        </button>

        <div class="order-note">
          <small>By placing your order, you agree to ShopiNow's privacy notice and conditions of use.</small>
        </div>
      </div>
    </div>
  </div>
</div>
